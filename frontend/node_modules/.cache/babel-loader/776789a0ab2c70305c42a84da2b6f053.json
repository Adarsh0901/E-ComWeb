{"ast":null,"code":"import _toConsumableArray from\"/Users/adarshshukla/Desktop/E-Com/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import Message from'../components/message';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var productId=match.params.id;var qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){history.push('/login?redirect=shipping');};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\"Your cart is Empty\",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"GO Back\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:cartItems.map(function(items){return/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"img\",{src:items.image,alt:items.name,className:\"img-fluid\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(items.product),style:{textDecoration:'none',color:'black'},children:items.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2\",children:[\"$\",items.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"select\",{value:items.qty,onChange:function onChange(e){return dispatch(addToCart(items.product,Number(e.target.value)));},children:_toConsumableArray(Array(items.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",onClick:function onClick(){return removeFromCartHandler(items.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},items.product);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group list-group-flush\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"SubTotal(\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") Items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dark btn-block\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Proceed to Checkout\"})})]})})]})});};export default CartScreen;","map":{"version":3,"sources":["/Users/adarshshukla/Desktop/E-Com/frontend/src/screens/cartScreen.js"],"names":["React","useEffect","Link","useDispatch","useSelector","Message","addToCart","removeFromCart","CartScreen","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","checkoutHandler","push","length","map","items","image","name","product","textDecoration","color","price","e","target","value","Array","countInStock","keys","x","reduce","acc","item","toFixed"],"mappings":"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","sourcesContent":["import React,{useEffect} from 'react'\nimport {Link} from 'react-router-dom'\nimport {useDispatch, useSelector} from 'react-redux'\nimport Message from '../components/message'\nimport {addToCart, removeFromCart} from '../actions/cartActions'\n\nconst CartScreen = ({match, location, history}) => {\n\n    const productId = match.params.id\n\n    const qty = location.search ? Number(location.search.split('=')[1]) : 1\n\n    const dispatch = useDispatch()\n\n    const cart = useSelector(state => state.cart)\n    const { cartItems } = cart\n\n    useEffect(() => {\n        if(productId){\n            dispatch(addToCart(productId, qty))\n        }\n    },[dispatch, productId, qty])\n\n    const removeFromCartHandler = (id) =>{\n        dispatch(removeFromCart(id))\n    }\n\n    const checkoutHandler = () => {\n        history.push('/login?redirect=shipping')\n    }\n\n    return (\n        <div>\n            <div className=\"row\">\n                <div className=\"col-md-8\">\n                    <h1>Shopping Cart</h1>\n                    {cartItems.length === 0 ? (<Message>Your cart is Empty<Link to='/'>GO Back</Link></Message>) : (\n                    <ul className=\"list-group list-group-flush\">\n                        {cartItems.map((items) => (\n                            <li className=\"list-group-item\" key={items.product}>\n                                <div className=\"row\">\n                                    <div className=\"col-md-2\">\n                                        <img src={items.image} alt={items.name} className=\"img-fluid\" ></img>\n                                    </div>\n                                    <div className=\"col-md-3\">\n                                        <Link to={`/product/${items.product}`} style={{textDecoration:'none', color:'black'}}>{items.name}</Link>\n                                    </div>\n                                    <div className=\"col-md-2\">\n                                        ${items.price}\n                                    </div>\n                                    <div className=\"col-md-2\">\n                                        <select value={items.qty} onChange={(e) => dispatch(addToCart(items.product, Number(e.target.value)))}>\n                                            {[...Array(items.countInStock).keys()].map((x) => (\n\n                                                <option key={x+1} value={x+1}>\n                                                    {x+1}\n                                                </option>\n                                            ))}\n                                        </select>\n                                    </div>\n                                    <div className=\"col-md-2\">\n                                        <button className=\"btn btn-dark\" onClick={() => removeFromCartHandler(items.product)}><i className=\"fas fa-trash\"></i></button>\n                                    </div>\n                                </div>\n                            </li>\n                        ))}\n                    </ul>\n                    )}\n                </div>\n                <div className=\"col-md-4\">\n                    <ul className=\"list-group list-group-flush\">\n                        <li className=\"list-group-item\" >\n                            <h2>SubTotal({cartItems.reduce((acc, item) => acc + item.qty, 0)}) Items</h2>\n                            ${cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)}\n                        </li>\n                        <li className='list-group-item'>\n                            <button type=\"button\" className=\"btn btn-dark btn-block\" onClick={checkoutHandler} disabled={cartItems.length === 0}>\n                                Proceed to Checkout\n                            </button>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default CartScreen\n"]},"metadata":{},"sourceType":"module"}