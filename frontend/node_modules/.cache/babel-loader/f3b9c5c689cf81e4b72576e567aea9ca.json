{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import Message from'../components/message';import Loader from'../components/loader';import{getOrderDetails,deliveredOrder}from'../actions/orderActions';import{ORDER_DELIVERED_RESET}from'../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OrderScreen=function OrderScreen(_ref){var match=_ref.match,history=_ref.history;var orderId=match.params.id;var orderDetails=useSelector(function(state){return state.orderDetails;});var order=orderDetails.order,loading=orderDetails.loading,error=orderDetails.error;var orderDelivered=useSelector(function(state){return state.orderDelivered;});var loadingDelivered=orderDelivered.loading,errorDelivered=orderDelivered.error,successDelivered=orderDelivered.success;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var dispatch=useDispatch();useEffect(function(){if(!userInfo){history.push('/login');}else{if(!order||order._id!==orderId||successDelivered){dispatch({type:ORDER_DELIVERED_RESET});dispatch(getOrderDetails(orderId));}// eslint-disable-next-line\n}},[order,orderId,successDelivered,history,userInfo,dispatch]);var orderDeliveredHandler=function orderDeliveredHandler(){dispatch(deliveredOrder(order));};return loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsxs(Message,{className:\"danger\",children:[\" \",error,\" \"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Order: \",order._id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group list-group-flush\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"SHIPPING\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),order.user.name,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Email: \"}),/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(order.user.email),children:order.user.email}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),order.shippingAddress.address,\" , \",order.shippingAddress.city,' ',\" , \",order.shippingAddress.postalcode,\" , \",order.shippingAddress.state,\", \",' ',order.shippingAddress.country]}),order.isDelivered?/*#__PURE__*/_jsxs(Message,{children:[\"Delivered At: \",order.deliveredAt]}):/*#__PURE__*/_jsx(Message,{children:\"Not Delivered\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"PAYMENT METHOD\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method: \"}),order.paymentMethod]}),order.isPaid?/*#__PURE__*/_jsxs(Message,{children:[\"Paid On: \",order.paidAt]}):/*#__PURE__*/_jsx(Message,{varient:\"alet-danger\",children:\"Not Paid\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"ORDER ITEMS\"}),order.orderItems.length===0?/*#__PURE__*/_jsx(Message,{children:\"order is Empty\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:order.orderItems.map(function(items,index){return/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"img\",{src:items.image,alt:items.name,className:\"img-fluid\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(items.product),style:{textDecoration:'none',color:'black'},children:items.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[items.qty,\" x $\",items.price,\" = $\",items.qty*items.price]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group list-group-flush\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"ORDER SUMMARY\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[\"$\",order.itemsPrice]})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[\"$\",order.shippingPrice]})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[\"$\",order.taxPrice]})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[\"$\",order.totalPrice]})]})}),loadingDelivered&&/*#__PURE__*/_jsx(Loader,{}),errorDelivered&&/*#__PURE__*/_jsx(Message,{children:errorDelivered}),userInfo&&userInfo.isAdmin&&!order.isDelivered&&/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",onClick:orderDeliveredHandler,children:\"Mark As Delivered\"})})]})})})]})]});};export default OrderScreen;","map":{"version":3,"sources":["/Users/adarshshukla/Desktop/E-Com/frontend/src/screens/OrderScreen.js"],"names":["React","useEffect","Link","useDispatch","useSelector","Message","Loader","getOrderDetails","deliveredOrder","ORDER_DELIVERED_RESET","OrderScreen","match","history","orderId","params","id","orderDetails","state","order","loading","error","orderDelivered","loadingDelivered","errorDelivered","successDelivered","success","userLogin","userInfo","dispatch","push","_id","type","orderDeliveredHandler","user","name","email","shippingAddress","address","city","postalcode","country","isDelivered","deliveredAt","paymentMethod","isPaid","paidAt","orderItems","length","map","items","index","image","product","textDecoration","color","qty","price","itemsPrice","shippingPrice","taxPrice","totalPrice","isAdmin"],"mappings":"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","sourcesContent":["import React,{useEffect} from 'react'\nimport { Link } from 'react-router-dom'\nimport {useDispatch, useSelector} from 'react-redux'\nimport Message from '../components/message'\nimport Loader from '../components/loader'\nimport {getOrderDetails, deliveredOrder} from '../actions/orderActions'\nimport { ORDER_DELIVERED_RESET } from '../constants/orderConstants'\n\nconst OrderScreen = ({match, history}) => {\n\n    const orderId = match.params.id\n\n    const orderDetails = useSelector(state => state.orderDetails)\n    const { order, loading, error } = orderDetails\n\n    const orderDelivered = useSelector(state => state.orderDelivered)\n    const {loading: loadingDelivered, error: errorDelivered, success: successDelivered } = orderDelivered\n\n    const userLogin = useSelector(state => state.userLogin)\n    const { userInfo } = userLogin\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        if(!userInfo){\n            history.push('/login')\n        }else{\n\n            if(!order || order._id !== orderId ||successDelivered) {\n                dispatch({type: ORDER_DELIVERED_RESET})\n                dispatch(getOrderDetails(orderId))\n            }\n            // eslint-disable-next-line\n        }\n    },[order, orderId, successDelivered,history,userInfo,dispatch])\n\n    const orderDeliveredHandler = () =>{\n        dispatch(deliveredOrder(order))\n    }\n\n    return loading ? <Loader/> : error ? <Message className=\"danger\"> {error} </Message> : <>\n\n        <h1>Order: {order._id}</h1>\n        <div className=\"row\">\n                <div className=\"col-md-8\">\n                    <ul className=\"list-group list-group-flush\" >\n                        \n                        <li className=\"list-group-item\" >\n                            <h1>SHIPPING</h1>\n                            <strong>Name: </strong>{order.user.name} <br/>\n                            <strong>Email: </strong><a href={`mailto:${order.user.email}`}>{order.user.email}</a>\n                            <p>\n                                <strong>Address: </strong>\n                                {order.shippingAddress.address} , {order.shippingAddress.city}{' '} , {order.shippingAddress.postalcode} , {order.shippingAddress.state}, {' '}{order.shippingAddress.country}\n                            </p>\n                            {order.isDelivered ? <Message>Delivered At: {order.deliveredAt}</Message> : <Message>Not Delivered</Message>}\n                        </li>\n                        <li className=\"list-group-item\">\n                            <h2>PAYMENT METHOD</h2>\n                            <p><strong>Method: </strong>{order.paymentMethod}</p>\n                            {order.isPaid ? <Message>Paid On: {order.paidAt}</Message> : <Message varient=\"alet-danger\">Not Paid</Message>}\n                        </li>\n                        <li className=\"list-group-item\">\n                            <h2>ORDER ITEMS</h2>\n                            {order.orderItems.length === 0 ? <Message>order is Empty</Message> : (\n                                <ul className=\"list-group list-group-flush\">\n                                    {order.orderItems.map((items, index) => (\n                                        <li className=\"list-group-item\" key={index}>\n                                            <div className=\"row\">\n                                                <div className=\"col-md-2\">\n                                                    <img src={items.image} alt={items.name} className=\"img-fluid\" ></img>\n                                                </div>\n                                                <div className=\"col-md-6\">\n                                                    <Link to={`/product/${items.product}`} style={{textDecoration:'none', color:'black'}}>{items.name}</Link>\n                                                </div>\n                                                <div className=\"col-md-4\">\n                                                    {items.qty} x ${items.price} = ${items.qty * items.price}\n                                                </div>\n                                            </div>\n                                        </li>\n                                    ))}\n                                </ul>\n                            )}\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"col-md-4\">\n                    <div className=\"card\">\n                        <ul className=\"list-group list-group-flush\">\n                            <li className=\"list-group-item\">\n                                <h2>ORDER SUMMARY</h2>\n                            </li>\n                            <li className=\"list-group-item\">\n                                <div className=\"row\">\n                                    <div className=\"col\">Items</div>\n                                    <div className=\"col\">${order.itemsPrice}</div>\n                                </div>\n                            </li>\n                            <li className=\"list-group-item\">\n                                <div className=\"row\">\n                                    <div className=\"col\">Shipping</div>\n                                    <div className=\"col\">${order.shippingPrice}</div>\n                                </div>\n                            </li>\n                            <li className=\"list-group-item\">\n                                <div className=\"row\">\n                                    <div className=\"col\">Tax</div>\n                                    <div className=\"col\">${order.taxPrice}</div>\n                                </div>\n                            </li>\n                            <li className=\"list-group-item\">\n                                <div className=\"row\">\n                                    <div className=\"col\">Total</div>\n                                    <div className=\"col\">${order.totalPrice}</div>\n                                </div>\n                            </li>\n                            {loadingDelivered && <Loader/>}\n                            {errorDelivered && <Message>{errorDelivered}</Message>}\n                            {userInfo && userInfo.isAdmin && !order.isDelivered && (\n                            <li className=\"list-group-item\">\n                                <button className=\"btn btn-dark\" onClick={orderDeliveredHandler}>Mark As Delivered</button>\n                            </li>\n                            )}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n    </>\n}\n\nexport default OrderScreen\n"]},"metadata":{},"sourceType":"module"}